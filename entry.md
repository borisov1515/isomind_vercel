Техническая спецификация: IsoMind (Автономный ИИ-агент с визуальным обучением)

1. Концепция и Видение

IsoMind — это платформа «ИИ-сотрудников», работающих в полностью изолированных графических средах. В отличие от традиционных облачных решений, IsoMind предлагает концепцию Local-First AI, где агент живет в выделенном контейнере пользователя, обеспечивая беспрецедентный уровень приватности и контроля.

Основные отличия и ценности:

Изоляция (Sandboxing): Каждый агент запускается в отдельном Docker-контейнере на удаленной GPU-ферме (Vast.ai). У него нет доступа к файловой системе хоста или данным других пользователей.

Визуальное обучение (No-Code Teaching): Пользователь не пишет код и не ищет селекторы. Он «показывает» ИИ процесс, записывая свои действия. Система преобразует эти действия в семантическую карту (Blueprint).

Суверенность данных: Все сессии, куки и логи хранятся в зашифрованном томе пользователя. Вы — единственный владелец «цифровых отпечатков» ваших агентов.

Адаптивность: Благодаря использованию Vision LLM, агент ориентируется на визуальный смысл элементов (например, «иконка корзины»), а не на жесткие координаты или хрупкие пути в коде сайта.

2. Архитектура Системы (Detailed)

А. Слой Инфраструктуры (The Sandbox Layer)

Хостинг: Динамическая аренда мощностей на Vast.ai (приоритет на RTX 3090/4090 для максимальной скорости инференса).

Контейнеризация: Образы на базе Ubuntu с предустановленным NVIDIA Container Toolkit и CUDA.

Графический стек:

Xvfb (X Virtual Framebuffer): Создание виртуального экрана высокого разрешения (1920x1080).

Fluxbox: Сверхлегкий оконный менеджер.

WebRTC/noVNC: Стриминг видеопотока экрана в браузер пользователя через защищенный канал (TLS).

Сетевой контроль (Firewalling): Использование iptables и прозрачного прокси внутри контейнера для ограничения трафика только списком разрешенных доменов (Whitelist).

Б. Слой Интеллекта (The Agentic Brain)

Core Vision Model: Qwen 2.5-VL (32B) — стратегическое планирование.

Fast Vision Model: Moondream 2 — детекция координат курсора и чтение текста.

Stealth Engine: Прослойка между ИИ и браузером, которая рандомизирует движения мыши (кривые Безье), скорость печати и имитирует человеческое поведение для обхода анти-бот систем.

3. Система Памяти и Самообучения

3.1. Визуальный RAG (Visual Anchors)

Вместо хранения координат $x, y$, система использует «Визуальные якоря»:

Запись: В момент клика система вырезает фрагмент изображения $100 \times 100$ пикселей вокруг курсора.

Семантический дескриптор: Vision-модель описывает роль элемента.

Векторизация: Сохранение в pgvector (PostgreSQL).

Восстановление: Поиск визуально и семантически похожих элементов при изменении верстки сайта.

3.2. Сценарная Память (Task Blueprints)

Задачи представляются в виде направленных графов (DAG):

Узлы (States): Текущее состояние экрана.

Ребра (Actions): Действия для перехода.

Проверки (Assertions): Условия успеха.

4. Анти-детект и Маскировка (Stealth & Multi-Account)

Для работы с TikTok, Google и другими платформами в 2026 году критически важны:

Fingerprint Management: Каждая сессия агента получает уникальный отпечаток (Canvas, WebGL, AudioContext, User-Agent).

Proxy Rotation: Поддержка резидентных прокси. Каждый аккаунт пользователя привязывается к своему IP-адресу.

Behavioral Randomization: ИИ имитирует человеческое поведение (микро-промахи, паузы).

5. Система безопасности и Guardrails

Supervisor Loop: Анализ планируемого действия агента.

Human-in-the-loop (HITL): Интеграция с Telegram-ботом для подтверждения постов.

Snapshotting & Persistence: Регулярные снимки состояния контейнера (куки, сессии) в S3.

6. Коммерческая и Операционная Модель

Dashboard: Мониторинг агентов и баланса.

Биллинг: $50/мес минимум + почасовая оплата за GPU.

Marketplace: Продажа готовых Блупринтов.

7. Технический стек (Antigravity & Development)

Frontend: Next.js + Tailwind CSS.

Backend: FastAPI (Python 3.12) + Celery/Redis.

Automation: Playwright Stealth + xdotool.

Database: PostgreSQL (pgvector) + S3 для бэкапов сессий.

8. Детальный план разработки (Phases & Milestones)

Фаза 1: Инфраструктурное Ядро (The Shell)

Цель: Обеспечить стабильную графическую среду с удаленным доступом.

1.1 Docker Foundations:

Создание Dockerfile с поддержкой NVIDIA CUDA 12.x.

Установка и настройка Xvfb, Openbox и Chromium (Playwright).

Настройка Supervisor для управления процессами (Xvfb, VNC, API).

1.2 Visual Streaming:

Интеграция selkies-gstreamer или aiortc для передачи видеопотока по WebRTC.

Настройка noVNC как резервного канала через WebSocket.

1.3 Connectivity:

Реализация SSH-авторизации между Antigravity и инстансом Vast.ai.

Настройка Port Forwarding для внутренних сервисов (VNC, API).

Фаза 2: Зрительный Аппарат и Stealth (The Senses)

Цель: Научить агента видеть экран и действовать скрытно.

2.1 Inference Engine:

Развертывание локального API через Ollama или vLLM внутри контейнера.

Интеграция Qwen 2.5-VL для обработки скриншотов.

2.2 Perception Logic:

Разработка модуля захвата экрана (скриншот -> нормализация -> подача в LLM).

Реализация маппинга текстовых координат (от 0 до 1000) в реальные пиксели экрана.

2.3 Stealth Layer:

Настройка playwright-stealth для подмены отпечатков браузера.

Реализация алгоритма "Human-like Mouse": кривые Безье, переменная скорость, рандомизация точек клика внутри целевой области.

Фаза 3: Память и Оркестрация (The Mind)

Цель: Обучение агента и управление сложными цепочками задач.

3.1 Visual RAG (pgvector):

Настройка PostgreSQL с расширением pgvector.

Разработка системы "Anchor Extraction": вырезание фрагментов UI и создание их эмбеддингов.

3.2 Blueprint Engine:

Создание парсера JSON-сценариев.

Реализация циклов ожидания (Polling) элементов с визуальной проверкой (например, "жди, пока не появится кнопка Download").

3.3 Persistence & States:

Интеграция с S3-совместимым хранилищем для бэкапа папки профиля Chromium (UserDataDir).

Автоматизация восстановления сессии при перезапуске инстанса.

Фаза 4: Продукт и Контроль (The SaaS)

Цель: Вывод системы в Web и запуск биллинга.

4.1 Central Dashboard:

Интерфейс управления инстансами: Start / Stop / Teach.

Просмотр логов действий агента в реальном времени.

4.2 HITL & Telegram:

Разработка бота для подтверждения действий ("Агент просит апрув на пост в TikTok").

Реализация "Центра одобрения" в веб-интерфейсе.

4.3 Billing Logic:

Интеграция Stripe/OpenMeter для почасового биллинга Vast.ai ресурсов.

Система лимитов (бюджет на день/неделю).