[supervisord]
nodaemon=true
user=agent
logfile=/app/supervisord.log
loglevel=info

[program:xvfb]
command=/usr/bin/Xvfb :99 -screen 0 %(ENV_RESOLUTION)s -ac +extension GLX +render -noreset
priority=10
autorestart=true

[program:openbox]
command=/usr/bin/openbox-session
environment=DISPLAY=":99"
priority=20
autorestart=true

[program:x11vnc]
command=/usr/bin/x11vnc -display :99 -nopw -forever -shared -bg -xkb
priority=30
autorestart=true

[program:agent_api]
command=/app/venv/bin/uvicorn agent_api.main:app --host 0.0.0.0 --port 8000
priority=40
autorestart=true
directory=/app
