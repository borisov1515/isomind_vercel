[program:xvfb]
command=/usr/bin/Xvfb :99 -screen 0 1920x1080x24 -ac +extension GLX +render -noreset
priority=10
autorestart=true

[program:openbox]
command=/usr/bin/openbox-session
environment=DISPLAY=":99"
priority=20
autorestart=true

[program:agent_api]
command=/opt/venv/bin/uvicorn agent_api.main:app --host 0.0.0.0 --port 8000
environment=DISPLAY=":99"
priority=40
autorestart=true
directory=/root/isomind/infrastructure

[program:vllm]
command=/opt/vllm_env/bin/python3 -m vllm.entrypoints.openai.api_server --model Qwen/Qwen2-VL-7B-Instruct --port 8001 --max-model-len 4096
priority=50
autorestart=true
environment=CUDA_VISIBLE_DEVICES="0,1"

[program:embedding_api]
command=/opt/vllm_env/bin/python3 -m uvicorn embedding_api.main:app --host 0.0.0.0 --port 8002
directory=/root/isomind/infrastructure
priority=60
autorestart=true
